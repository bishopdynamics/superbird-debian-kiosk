#!/usr/bin/env bash

# Shared config for image scripts
# shellcheck disable=SC2034

# where to find an existing superbird device dump, to use for creating a debian image
EXISTING_DUMP_NAME="debian_current"
EXISTING_DUMP="./dumps/${EXISTING_DUMP_NAME}"

# Network info
HOST_NAME="superbird"
USBNET_PREFIX="192.168.7"  # usb network will use .1 as host device, and .2 for superbird

# User info
USER_NAME="superbird"
# generate hash: openssl passwd -6 "superbird"
#   shellcheck disable=SC2016
USER_PASS_HASH='$6$zeM8ZwO/Xke05h6X$UtmM0sIBznj4hxmd/UGUO1YHUr0emOn.9u7G1yQRVGR4XutYCstDzVLzpUw9PNWrhYRAEg73ovkC4JNPFlSmI1'

# config for debootstrap
ARCHITECTURE="arm64"
DISTRO_REPO_URL="http://deb.debian.org/debian/"
# DISTRO_BRANCH="trixie"
DISTRO_BRANCH="bullseye"
DISTRO_VARIANT="minbase"

# you can add extra packages here to install during stage 2
#   will be installed like this (in chroot): apt install -y --no-install-recommends --no-install-suggests $EXTRA_PACKAGES
EXTRA_PACKAGES=""

# timezone and locale
TIMEZONE="America/Los_Angeles"
LOCALE="en_US.UTF-8"

# SSH keys
#   NOTE: this key is ONLY used between the host and superbird, via the usb network.

SSH_KEY_PRIVATE=$(
cat <<'EOF'
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
NhAAAAAwEAAQAAAYEAryyRSeIDnoI3PzTNCqAzHBBnooNF7JSlPoOLmPRsQIHRgcsbTmSF
5OdwJG3A3hOsiGjFme5sV89S5A7MskX2vc0dZaR93W210zeZaTK7yfwhfMezSDGWy/vCDe
JUzB9zalSewMbh0An1cCIDi2mEjcRMFpQvejZLIQg4yPY59KvF1uNCfNk1O5hnnUga2mGT
tWlt/ddmkvyIifATuS2EHAECWimPcHcyiOZ/GLiafPVHvFC+KZY8xh498j086hX73bJhEj
J/H8DpIz9kfxI7FjYjKkRYkV4HovObb+AqIxJmhOgb+yIYhUnnMAi6fSYzSbPqTh5NE2Sg
AZp+ty445ndEkHB7szITkJMNbV1js1oPwo2aXKVgR5xe5PQZQIIgW/w6pc9rOPHQ6F+vVu
lgu1s5iMMvRWUizFEebxhCrsndSgwDLb/01NEBr1oX9Hop2TyiiEX8oeKjEZ2aVfgNtA7M
J2GO56DXrIIjU4mj3pwWb41i8RtgVjaRQCK/eBS7AAAFkE1Qj0pNUI9KAAAAB3NzaC1yc2
EAAAGBAK8skUniA56CNz80zQqgMxwQZ6KDReyUpT6Di5j0bECB0YHLG05kheTncCRtwN4T
rIhoxZnubFfPUuQOzLJF9r3NHWWkfd1ttdM3mWkyu8n8IXzHs0gxlsv7wg3iVMwfc2pUns
DG4dAJ9XAiA4tphI3ETBaUL3o2SyEIOMj2OfSrxdbjQnzZNTuYZ51IGtphk7Vpbf3XZpL8
iInwE7kthBwBAlopj3B3Mojmfxi4mnz1R7xQvimWPMYePfI9POoV+92yYRIyfx/A6SM/ZH
8SOxY2IypEWJFeB6Lzm2/gKiMSZoToG/siGIVJ5zAIun0mM0mz6k4eTRNkoAGafrcuOOZ3
RJBwe7MyE5CTDW1dY7NaD8KNmlylYEecXuT0GUCCIFv8OqXPazjx0Ohfr1bpYLtbOYjDL0
VlIsxRHm8YQq7J3UoMAy2/9NTRAa9aF/R6Kdk8oohF/KHioxGdmlX4DbQOzCdhjueg16yC
I1OJo96cFm+NYvEbYFY2kUAiv3gUuwAAAAMBAAEAAAGAGus3XGot8jLCeKUNiT96+yoOMu
wHV8az6fpe/l85L2SDpHVoudA6vyVNl1uCUt4lGkU3cGMyJQBIFaGslQypURtvFAqGCPvu
AApAOelA8FYdc0Zg54wvRyNl+6o3K7L9km50gt1NICIXpGalssvBQePTaXjWHuqu+uF/kG
o+F7o5yb7cncDnLERMT+AfuEVcZHlSHLr4GUhTVxccgM1cyszg5qgSUc8PZfg9ubfMjb1H
i8nAnzVmG2/URyBf9vzvmVijHUbrJIqVusmlHRvgAhv6+9EPIZ3K6qflwwEFvJsOYFS90p
P0bR53DV50ix1OomRLNhzVvccdNdi6VPJ5o7w2fas/KQgGRQBd5qyz3DMvNzKsNrlNoaue
fc5YMXxdOdTxdoxAuea/c+MGpbNYKcUyE7Y1Q5n+9V31B8zcs9c6J9a3vEpYSlLD77WVZ9
gyTH2fY6i/keugFv/jbZgCAncSd3LkC2tTitVVxN1HCFS955zYr8ue5I9xu2bRiUHxAAAA
wQCtpfz17BI/TPP9yfEagoIXQMcoRZ5QqC/xwNv/glZfTc7M5i3ZamX+TAYl7Y1Rd9AWUB
JFUB98svDs90M0Ec3ukE5vrq+QpLOkrYIgjdCIjMjP/WdZi7Jl8ppp8YgfGPrIx2KrlpP8
MASmID25ZGFhZk5ILo/rVgH8PbLnODnuby5lenjF7/JGs1NFQJlVFp/ByxKKsM10XTt/ct
Ox6ZpTVH0k1fwIzi7hEpmlmWjyoF8lxb3hTk5SpEmcYNpPxR8AAADBANWkcGiX1XvAJdMY
Lv5tzj8eHl3GUo18420PKItZTCb7xxpoKfDZy9wYTgMT9cGky35OMBumt2w7d9Hxt8WqtC
aojUHA5aPDYcY3xLqcWRQa4K5thwpHpYpdp9i+6sgz3R7Vl/88NTkzl13tCrVOivwRxi1y
HbJgdZGNJD95eOB7wt3xs7zKzFSkreLotKlRlB5Lrf1b15jsFceBEc/TqTzFjlbQhBMCw4
PWhOJnV5BTZ1qmPokBmR/FfS+9I5skSQAAAMEA0eelhkusbNL5uhEYtVzXPylgvxHW3sTW
Ajgehx2WCBD0YjXEdHCj35gi5x2lMqAK183OEJtuCKX3lcVlHKfUAIEAuNGtl3kVW6nvOH
IGJpRHJCR2bCDdt5hxG5c5gZ7ZkJ/UAL7MZwKyKm0WiwhR/rMSlkHeTtYlDEZ/Fd9+Xkh1
zcSOQK8WVYsPLeNdt0Cgy7HXdJ5C9lNbuyCQas4abqqznvbIu13RtUtXAgyrLnBiGjJM1T
GHJp9InDC2X6jjAAAAFXN1cGVyYmlyZEBXYWxsVGhpbmctNQECAwQF
-----END OPENSSH PRIVATE KEY-----
EOF
)

SSH_KEY_PUBLIC=$(
cat <<'EOF'
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCvLJFJ4gOegjc/NM0KoDMcEGeig0XslKU+g4uY9GxAgdGByxtOZIXk53AkbcDeE6yIaMWZ7mxXz1LkDsyyRfa9zR1lpH3dbbXTN5lpMrvJ/CF8x7NIMZbL+8IN4lTMH3NqVJ7AxuHQCfVwIgOLaYSNxEwWlC96NkshCDjI9jn0q8XW40J82TU7mGedSBraYZO1aW3912aS/IiJ8BO5LYQcAQJaKY9wdzKI5n8YuJp89Ue8UL4pljzGHj3yPTzqFfvdsmESMn8fwOkjP2R/EjsWNiMqRFiRXgei85tv4CojEmaE6Bv7IhiFSecwCLp9JjNJs+pOHk0TZKABmn63Ljjmd0SQcHuzMhOQkw1tXWOzWg/CjZpcpWBHnF7k9BlAgiBb/Dqlz2s48dDoX69W6WC7WzmIwy9FZSLMUR5vGEKuyd1KDAMtv/TU0QGvWhf0einZPKKIRfyh4qMRnZpV+A20DswnYY7noNesgiNTiaPenBZvjWLxG2BWNpFAIr94FLs= superbird@host
EOF
)

